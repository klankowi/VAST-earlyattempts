library(ncdf4)
library(raster)
library(tidyverse)
source("nc_to_raster.R")
source("raster_to_sstdf.R")
varname <- 'sst'
# Convert netcdf file to raster
i <- 1985
#for(i in years) {
name <- paste0("sst.day.mean.", i, ".nc")
filename <- here::here("data-raw","gridded", "sst_data", paste0("test_", i, ".grd"))
text <- knitr::knit_expand(text = "test_{{year}} <- nc_to_raster(nc = name, varname = varname)
raster::writeRaster(test_{{year}}, filename = filename, overwrite=TRUE)",
year = i)
try(eval(parse(text = text)))
unlink(name) # remove nc file to save space
#}
# Save rasters as rds files
#for(i in years) {
name <- get(paste0("test_",i))
filename <- here::here("data-raw","gridded", "sst_data", paste0("sst", i, ".rds"))
text <- knitr::knit_expand(text = "sst{{year}} <- raster_to_sstdf(brick = name)
saveRDS(sst{{year}}, filename)",
year = i)
try(eval(parse(text = text)))
#}
library(ncdf4)
library(raster)
library(tidyverse)
source("nc_to_raster.R")
source("raster_to_sstdf.R")
varname <- 'sst'
# Convert netcdf file to raster
i <- 1986
#for(i in years) {
name <- paste0("sst.day.mean.", i, ".nc")
filename <- here::here("data-raw","gridded", "sst_data", paste0("test_", i, ".grd"))
text <- knitr::knit_expand(text = "test_{{year}} <- nc_to_raster(nc = name, varname = varname)
raster::writeRaster(test_{{year}}, filename = filename, overwrite=TRUE)",
year = i)
try(eval(parse(text = text)))
unlink(name) # remove nc file to save space
#}
# Save rasters as rds files
#for(i in years) {
name <- get(paste0("test_",i))
filename <- here::here("data-raw","gridded", "sst_data", paste0("sst", i, ".rds"))
text <- knitr::knit_expand(text = "sst{{year}} <- raster_to_sstdf(brick = name)
saveRDS(sst{{year}}, filename)",
year = i)
try(eval(parse(text = text)))
#}
library(ncdf4)
library(raster)
library(tidyverse)
source("nc_to_raster.R")
source("raster_to_sstdf.R")
varname <- 'sst'
# Convert netcdf file to raster
years <- 1987:1999
for(i in years) {
name <- paste0("sst.day.mean.", i, ".nc")
filename <- here::here("data-raw","gridded", "sst_data", paste0("test_", i, ".grd"))
text <- knitr::knit_expand(text = "test_{{year}} <- nc_to_raster(nc = name, varname = varname)
raster::writeRaster(test_{{year}}, filename = filename, overwrite=TRUE)",
year = i)
try(eval(parse(text = text)))
unlink(name) # remove nc file to save space
#}
# Save rasters as rds files
#for(i in years) {
name <- get(paste0("test_",i))
filename <- here::here("data-raw","gridded", "sst_data", paste0("sst", i, ".rds"))
text <- knitr::knit_expand(text = "sst{{year}} <- raster_to_sstdf(brick = name)
saveRDS(sst{{year}}, filename)",
year = i)
try(eval(parse(text = text)))
}
rm(list=ls())
library(VAST)
library(sf)
library(tidyverse)
library(rgdal)
library(here)
## Add spatial grid
user_region <- readRDS(here('data/user_region_wgom.rds'))
## Add strata
strata <- readOGR(here("data/strata_stox_orig.shp"))
strata.2 <- st_as_sf(strata)
strata.tab <- table(strata.2$STRATA_1, strata.2$STOCK)
usethis::use_git_ignore(".Rproj.user")
